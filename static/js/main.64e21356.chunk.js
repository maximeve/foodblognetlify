(this.webpackJsonpfoodblog=this.webpackJsonpfoodblog||[]).push([[0],{160:function(e,t,n){},161:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(40),i=n.n(r),s=(n(160),n(161),n(1)),o=n.n(s),l=n(5),j=n(15),u=n(292),b=n(134),d=n.n(b)()({projectId:"ax0dwmu4",dataset:"production",apiVersion:"2021-10-11"}),h=n(78),x=n(141),O=n(7),m=n(300),p=n(301),f=n(302),g=n(303),v=n(304),w=n(305),y=n(291),S=n(294),k=n(295),I=n(61),F=n(111),C=n.n(F),L=n(113),W=n.n(L),E=n(45),P=n(135),_=n(79),D=(Object(P.a)({apiKey:"AIzaSyBORjFYLy33OYlVFNhnJQyRnR7Q9FZJA-I",authDomain:"foodblog-5dc5f.firebaseapp.com",projectId:"foodblog-5dc5f",storageBucket:"foodblog-5dc5f.appspot.com",messagingSenderId:"822400633811",appId:"1:822400633811:web:b578d8458f2d8b3f2a7d26"}),Object(_.b)());function R(e,t){return Object(_.a)(D,e,t)}function B(){Object(_.d)(D)}function T(){var e=Object(a.useState)(),t=Object(j.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){return Object(_.c)(D,(function(e){c(e)}))}),[]),n}var U=n(36),A=n(92),J=Object(A.b)({name:"account",initialState:{isLoggedIn:!1,favoritePosts:[],search:""},reducers:{login:function(e,t){e.isLoggedIn=t.payload},logout:function(e){e.isLoggedIn=!1},addFavorite:function(e,t){e.favoritePosts.push(t.payload)},setSearch:function(e,t){e.search=t.payload}}}),V=J.actions,G=(V.login,V.logout,V.addFavorite),q=V.setSearch,z=J.reducer,K=n(2),M=["expand"],N=n(128),Q=Object(O.a)((function(e){e.expand;var t=Object(x.a)(e,M);return Object(K.jsx)(S.a,Object(h.a)({},t))}))((function(e){var t=e.theme;return{transform:e.expand?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})}}));var Y=function(e){var t=c.a.useState(!1),n=Object(j.a)(t,2),r=n[0],i=n[1],s=c.a.useState([]),u=Object(j.a)(s,2),b=u[0],h=u[1],x=c.a.useState(null),O=Object(j.a)(x,2),F=O[0],L=O[1],P=c.a.useState(null),_=Object(j.a)(P,2),D=_[0],R=_[1],B=Object(U.c)((function(e){return e.account.favoritePosts})),A=T(),J=Object(U.b)();Object(a.useEffect)((function(){Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.fetch('*[_type == "author"]{\n            name,\n            _id,\n            "imageUrl": image.asset->url\n          }').then((function(e){return h(e)})).catch(console.error);case 2:case"end":return e.stop()}}),e)})))()}),[e.author]),Object(a.useEffect)((function(){var t=b.findIndex((function(t){return t._id===e.author}));L(b[t])}),[b]);var V=function(){i(!r)},q=Object(K.jsxs)(m.a,{children:[Object(K.jsx)(p.a,{avatar:Object(K.jsx)(y.a,{sx:{bgcolor:I.a[500]},"aria-label":"recipe",src:null!=F?F.imageUrl:""}),title:null!=F?F.name:"Unknown Author"}),Object(K.jsx)(E.b,{to:"post/".concat(e.slug.current),children:Object(K.jsx)(f.a,{component:"img",height:"194",image:e.image,alt:e.title})}),Object(K.jsx)(g.a,{children:Object(K.jsx)(k.a,{variant:"h6",color:"text.secondary",children:e.title})}),Object(K.jsxs)(v.a,{disableSpacing:!0,children:[Object(K.jsx)(S.a,{"aria-label":"add to favorites",onClick:function(){var t=B.findIndex((function(t){return t.title===e.title}));null!==A?-1===t&&J(G(e)):R("Please log in to save to favorites")},children:Object(K.jsx)(C.a,{})}),Object(K.jsx)(Q,{expand:r,onClick:V,"aria-expanded":r,"aria-label":"show more",children:Object(K.jsx)(W.a,{})})]}),Object(K.jsx)(k.a,{paragraph:!0,sx:{color:I.a[500],display:"flex",justifyContent:"center"},children:D||""}),Object(K.jsx)(w.a,{in:r,timeout:"auto",unmountOnExit:!0,children:Object(K.jsx)(g.a,{children:Object(K.jsx)(k.a,{paragraph:!0,children:Object(K.jsx)(N,{blocks:e.body})})})})]}),z=Object(K.jsxs)(m.a,{children:[Object(K.jsx)(g.a,{children:Object(K.jsx)(k.a,{variant:"h6",color:"text.secondary",children:"Loading"})}),Object(K.jsxs)(v.a,{disableSpacing:!0,children:[Object(K.jsx)(S.a,{"aria-label":"add to favorites",children:Object(K.jsx)(C.a,{})}),Object(K.jsx)(Q,{expand:r,onClick:V,"aria-expanded":r,"aria-label":"show more",children:Object(K.jsx)(W.a,{})})]})]});return Object(K.jsx)(K.Fragment,{children:null!=F?q:z})};var Z=function(){var e=Object(a.useState)([]),t=Object(j.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(null),i=Object(j.a)(r,2),s=i[0],b=i[1],h=Object(U.c)((function(e){return e.account.search}));return Object(a.useEffect)((function(){Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.fetch('*[_type == "post"]{\n            title,\n            slug,\n            author,\n            body,\n            mainImage{\n                asset->{\n                    _id,\n                    url\n                },\n                alt\n            }\n        }').then((function(e){c(e),console.log(n)})).catch(console.error);case 2:case"end":return e.stop()}}),e)})))()}),[]),Object(a.useEffect)((function(){if(h.length>0){var e=n.findIndex((function(e){return e.title===h}));-1!==e&&b([n[e]])}else b(null)}),[h]),Object(K.jsx)(K.Fragment,{children:null===s?Object(K.jsx)(u.a,{container:!0,rowSpacing:1,columnSpacing:{xs:1,sm:2,md:2,lg:2},children:n.map((function(e){return Object(K.jsx)(u.a,{item:!0,xs:12,md:4,sm:12,children:Object(K.jsx)(Y,{title:e.title,slug:e.slug,author:e.author._ref,image:e.mainImage.asset.url,body:e.body},e.title)})}))}):Object(K.jsx)(u.a,{container:!0,rowSpacing:1,columnSpacing:{xs:1,sm:2,md:2,lg:2},children:s.map((function(e){return Object(K.jsx)(u.a,{item:!0,xs:12,md:4,sm:12,children:Object(K.jsx)(Y,{title:e.title,slug:e.slug,author:e.author._ref,image:e.mainImage.asset.url,body:e.body},e.title)})}))})})},H=n(296);var X=function(){return Object(K.jsx)("main",{children:Object(K.jsx)(H.a,{maxWidth:"xl",children:Object(K.jsx)(Z,{})})})},$=n(307),ee=n(287),te=(n(306),n(297)),ne=n(90),ae=n.n(ne),ce=n(139),re=n(293);var ie=Object(ce.a)();function se(e){var t=Object(a.useState)(!1),n=Object(j.a)(t,2),c=(n[0],n[1]);function r(){return(r=Object(l.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),t.preventDefault(),e.prev=2,e.next=5,B();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.log(e.t0);case 10:c(!0);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}return Object(K.jsx)(re.a,{theme:ie,children:Object(K.jsxs)(H.a,{component:"main",maxWidth:"xs",children:[Object(K.jsx)(ee.a,{}),Object(K.jsxs)(te.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(K.jsx)(y.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(K.jsx)(ae.a,{})}),Object(K.jsx)(k.a,{component:"h1",variant:"h5",children:"Sign out"}),Object(K.jsx)(te.a,{component:"form",onSubmit:function(e){return r.apply(this,arguments)},noValidate:!0,sx:{mt:1},children:Object(K.jsx)($.a,{type:"Sign Out",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Logout"})})]})]})})}var oe=n(288),le=Object(ce.a)();function je(e){var t=Object(a.useState)(!1),n=Object(j.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(""),s=Object(j.a)(i,2),b=s[0],d=s[1],h=T();function x(){return(x=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),t.preventDefault(),n=new FormData(t.currentTarget),e.prev=3,e.next=6,R(n.get("email"),n.get("password"));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),d("Oops..something went wrong!");case 11:r(!1);case 12:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}return Object(K.jsx)(re.a,{theme:le,children:Object(K.jsxs)(H.a,{component:"main",maxWidth:"xs",children:[Object(K.jsx)(ee.a,{}),Object(K.jsxs)(te.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(K.jsx)(y.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(K.jsx)(ae.a,{})}),Object(K.jsx)(k.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(K.jsxs)(te.a,{component:"form",noValidate:!0,onSubmit:function(e){return x.apply(this,arguments)},sx:{mt:3},children:[Object(K.jsxs)(u.a,{container:!0,spacing:2,children:[Object(K.jsx)(u.a,{item:!0,xs:12,children:Object(K.jsx)(oe.a,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email"})}),Object(K.jsx)(u.a,{item:!0,xs:12,children:Object(K.jsx)(oe.a,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password"})})]}),Object(K.jsx)($.a,{disabled:c||null!=h,type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"})]}),Object(K.jsx)("p",{children:b})]})]})})}function ue(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],c=t[1],r=T(),i=function(){c(!n)};return Object(K.jsx)(K.Fragment,{children:null!==r?Object(K.jsx)(se,{handleChange:i}):Object(K.jsx)(je,{handleChange:i})})}var be=n(4),de=n(281),he=n(298),xe=n(299),Oe=n(29),me=n(137),pe=n.n(me),fe=n(138),ge=n.n(fe),ve=(n(239),Object(O.a)("div")((function(e){var t=e.theme;return Object(be.a)({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(de.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(de.a)(t.palette.common.white,.25)},marginLeft:0,width:"100%"},t.breakpoints.up("sm"),{marginLeft:t.spacing(1),width:"auto"})}))),we=Object(O.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),ye=Object(O.a)(Oe.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":Object(be.a)({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}}));var Se=function(){var e=Object(U.b)(),t=Object(a.useRef)();return Object(K.jsx)("nav",{children:Object(K.jsx)(te.a,{sx:{flexGrow:1,mb:5},children:Object(K.jsx)(he.a,{position:"static",children:Object(K.jsxs)(xe.a,{children:[Object(K.jsx)(k.a,{variant:"h6",noWrap:!0,component:"div",sx:{mr:2,flexGrow:0,display:{xs:"block",sm:"block"}},children:Object(K.jsx)(E.b,{to:"/",children:"Foodblog"})}),Object(K.jsx)(k.a,{variant:"h7",noWrap:!0,component:"div",sx:{flexGrow:1,display:{xs:"none",sm:"block"}},children:Object(K.jsx)(E.b,{to:"/favorites",variant:"h7",children:"Favorites"})}),Object(K.jsxs)(ve,{children:[Object(K.jsx)(we,{children:Object(K.jsx)(pe.a,{})}),Object(K.jsx)(ye,{inputRef:t,onKeyPress:function(){e(q(t.current.value))},placeholder:"Search\u2026",inputProps:{"aria-label":"search"}})]}),Object(K.jsx)(S.a,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",color:"inherit",children:Object(K.jsx)(E.b,{to:"/account",children:Object(K.jsx)(ge.a,{})})})]})})})})};var ke=function(){var e=Object(U.c)((function(e){return e.account.favoritePosts}));console.log(e);var t=Object(K.jsx)(u.a,{container:!0,rowSpacing:1,columnSpacing:{xs:1,sm:2,md:2,lg:2},children:e.map((function(e){return Object(K.jsx)(u.a,{item:!0,xs:12,md:4,sm:12,children:Object(K.jsx)(Y,{title:e.title,slug:e.slug,author:e.author,image:e.image,body:e.body},e.title)})}))}),n=Object(K.jsx)(u.a,{container:!0,rowSpacing:1,columnSpacing:{xs:1,sm:2,md:2,lg:2},children:Object(K.jsx)(u.a,{item:!0,xs:12,md:4,sm:12,children:Object(K.jsx)(k.a,{component:"h1",variant:"h5",children:"No favorite posts saved"})})});return Object(K.jsxs)(H.a,{maxWidth:"xl",children:[Object(K.jsx)(k.a,{variant:"h3",mb:4,component:"h2",children:"Favorite Posts"}),e?t:n]})},Ie=n(24),Fe=n(128);var Ce=function(){var e=Object(a.useState)(null),t=Object(j.a)(e,2),n=t[0],r=t[1],i=c.a.useState([]),s=Object(j.a)(i,2),u=(s[0],s[1]),b=Object(Ie.f)();Object(a.useEffect)((function(){Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.fetch('*[_type == "post" && title match \''.concat(b.slug,"']{\n                title,\n                slug,\n                author,\n                body,\n                mainImage{\n                    asset->{\n                        _id,\n                        url\n                    },\n                    alt\n                }\n            }")).then((function(e){return r(e)})).catch(console.error);case 2:case"end":return e.stop()}}),e)})))()}),[]),Object(a.useEffect)((function(){Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.fetch('*[_type == "author"]{\n                name,\n                _id,\n                "imageUrl": image.asset->url\n              }').then((function(e){return u(e)})).catch(console.error);case 2:case"end":return e.stop()}}),e)})))()}),[]);var h=Object(K.jsx)(H.a,{maxWidth:"lg",children:null===n?"":Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("h1",{children:n[0].title}),Object(K.jsx)(te.a,{sx:{display:"flex",alignItems:"center"}}),Object(K.jsx)("img",{src:n[0].mainImage.asset.url,width:"100%"}),Object(K.jsx)(Fe,{blocks:n[0].body})]})}),x=Object(K.jsx)(H.a,{maxWidth:"lg",children:null===n?"":Object(K.jsxs)(K.Fragment,{children:[Object(K.jsx)("h1",{children:n[0].title}),Object(K.jsx)(y.a,{"aria-label":"author",src:""}),Object(K.jsx)("h3",{children:"Loading"}),Object(K.jsx)("img",{src:"",width:"100%"}),Object(K.jsx)(Fe,{})]})});return Object(K.jsx)(K.Fragment,{children:null!==n?h:x})};var Le=function(){return Object(K.jsxs)(E.a,{children:[Object(K.jsx)(Se,{}),Object(K.jsxs)(Ie.c,{children:[Object(K.jsx)(Ie.a,{component:X,path:"/",exact:!0}),Object(K.jsx)(Ie.a,{component:ue,path:"/account",exact:!0}),Object(K.jsx)(Ie.a,{component:ke,path:"/favorites"}),Object(K.jsx)(Ie.a,{component:Ce,path:"/post/:slug"})]})]})},We=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,310)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},Ee=Object(A.a)({reducer:{account:z}});i.a.render(Object(K.jsx)(c.a.StrictMode,{children:Object(K.jsx)(U.a,{store:Ee,children:Object(K.jsx)(Le,{})})}),document.getElementById("root")),We()}},[[240,1,2]]]);
//# sourceMappingURL=main.64e21356.chunk.js.map